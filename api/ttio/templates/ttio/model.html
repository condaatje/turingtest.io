{% extends 'ttio/base.html' %}
{% load static %}
{% load ttio_extras %}
{% load humanize %}

{% block extra_css %}

{% endblock %} 

{% block content %}
<body>
	<div id="page-wrapper">

		<!-- Header -->
		{% include 'ttio/header.html' %}
		
		<div class="container-fluid">
		<!--http://stackoverflow.com/questions/16616260/django-template-context-for-loop-traversal-->
		{% for question, info in data.items %}
		<br/>
		<table class="table table-striped">
			<!--http://stackoverflow.com/questions/22486402/html-bootstrap-table-title-caption-with-title-on-left-side-and-buttons-on-righ-->
			<caption class="text-center" style="border: inherit; background-color: lightgrey;">
				<strong>Question: </strong> "{{question}}"
				<br/>
				<strong>Failure Percentage: </strong> {{ info.failures|percent:info.frequency|floatformat:2|intcomma }}%
			</caption>
			<thead>
				<tr>
					<th class="col-sm-11">Response</th>
					<th class="col-sm-1 text-right">Percent Failure</th>
				</tr>
			</thead>
			<tbody>
				{% for response, props in info.responses.items %}
				<tr>
					<!--http://stackoverflow.com/questions/11481499/django-iterate-number-in-for-loop-of-a-template-->
					<td>"{{response}}"</td> <!-- response -->
					
					<td class="text-right">
						{{ props.failures|percent:props.frequency|floatformat:2|intcomma }}%</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
		<br/>
				
		{% endfor %}
		</div>
		{% include 'ttio/footer.html' %}

	</div>

	{% block extra_js %}
	{% endblock %}
	
</body>
{% endblock %}

<!--http://stackoverflow.com/questions/346467/format-numbers-in-django-templates-->